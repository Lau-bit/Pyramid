<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Obama Pyramid</title>
    <style>
        body { 
            margin: 0; 
            overflow: hidden; 
            background: white; 
        }
    </style>
    <script type="importmap">
    {
        "imports": {
            "three": "https://cdn.jsdelivr.net/npm/three@0.181.0/build/three.module.js",
            "three/addons/": "https://cdn.jsdelivr.net/npm/three@0.181.0/examples/jsm/"
        }
    }
    </script>
</head>
<body>
    <script type="module">
        import * as THREE from 'three';
        import { OrbitControls } from 'three/addons/controls/OrbitControls.js';

        const scene = new THREE.Scene();

        const camera = new THREE.PerspectiveCamera(60, window.innerWidth / window.innerHeight, 0.1, 1000);
        camera.position.set(0, 4, 10);

        const renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true }); // alpha: true = transparent canvas so CSS background shows through
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.setPixelRatio(window.devicePixelRatio);
        renderer.toneMapping = THREE.ACESFilmicToneMapping;
        renderer.toneMappingExposure = 1.0;
        document.body.appendChild(renderer.domElement);

        const controls = new OrbitControls(camera, renderer.domElement);
        controls.enableDamping = true;
        controls.dampingFactor = 0.05;
        controls.rotateSpeed = 0.7;
        controls.minDistance = 5;
        controls.maxDistance = 20;

        // Classic Obama portrait
        const textureLoader = new THREE.TextureLoader();
        const obamaTexture = textureLoader.load('https://upload.wikimedia.org/wikipedia/commons/8/8d/President_Barack_Obama.jpg');

        const material = new THREE.MeshStandardMaterial({
            map: obamaTexture,
            side: THREE.DoubleSide,
            metalness: 0.15,
            roughness: 0.3,
            envMapIntensity: 1.8   // slightly increased to pick up more room reflections
        });

        // Lighting (compensating for no HDR - looks very natural with the photo background)
        const ambientLight = new THREE.AmbientLight(0xffffff, 0.7);
        scene.add(ambientLight);

        const keyLight = new THREE.DirectionalLight(0xffffff, 3.5);
        keyLight.position.set(5, 10, 7);
        scene.add(keyLight);

        const group = new THREE.Group();
        scene.add(group);

        const height = 4.5;
        const size = 3.2;

        const apex = new THREE.Vector3(0, height, 0);
        const p1 = new THREE.Vector3(-size, 0, -size);
        const p2 = new THREE.Vector3( size, 0, -size);
        const p3 = new THREE.Vector3( size, 0,  size);
        const p4 = new THREE.Vector3(-size, 0,  size);

        function createTriangularFace(v1, v2, v3) {
            const geom = new THREE.BufferGeometry();
            const positions = new Float32Array([
                v1.x, v1.y, v1.z,
                v2.x, v2.y, v2.z,
                v3.x, v3.y, v3.z
            ]);
            geom.setAttribute('position', new THREE.BufferAttribute(positions, 3));
            
            const uvs = new Float32Array([
                0.5, 1,   // apex = Obama's eyes
                0,   0,
                1,   0
            ]);
            geom.setAttribute('uv', new THREE.BufferAttribute(uvs, 2));
            
            geom.computeVertexNormals();
            return new THREE.Mesh(geom, material);
        }

        group.add(createTriangularFace(apex, p1, p2));
        group.add(createTriangularFace(apex, p2, p3));
        group.add(createTriangularFace(apex, p3, p4));
        group.add(createTriangularFace(apex, p4, p1));

        // Base with full Obama face
        const baseGeometry = new THREE.PlaneGeometry(size * 2, size * 2);
        const baseMesh = new THREE.Mesh(baseGeometry, material);
        baseMesh.rotation.x = -Math.PI / 2;
        baseMesh.position.y = 0.002;
        group.add(baseMesh);

        // Eternal slow rotation inside the Oval Office
        const rotationSpeed = 0.004;

        function animate() {
            requestAnimationFrame(animate);
            group.rotation.y += rotationSpeed;
            controls.update();
            renderer.render(scene, camera);
        }

        animate();

        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        });
    </script>
</body>
</html>